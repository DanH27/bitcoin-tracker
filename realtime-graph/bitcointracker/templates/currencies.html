<!-- ./templates/currencies.html -->
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CryptoLiveChart!</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css"> -->
    <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}"> -->
    <style>
      #cc-table {
          margin: 0 auto;
          width: 100%;
      }
      #cc-table td {
        text-align: center;
        padding: 2px;
      }
      #cc-table th {
        padding-bottom: 30px;
      }
      #cc-table tr:hover {
        color: red;
      }

    </style>

</head>
<body>


          <h1 class="title is-6" id="b_price">{{bitcoinprice}}</h1>
          <h1>CASH:</h1>
          <h1 class="title is-6" id="m_left">{{moneyLeft}}</h1>



      <!-- <form name="text" method="POST" action="/form">
          <input name="comp_select">
          <input type="submit" value="Buy">
      </form> -->


    <div class="table-background">
        <h1>PICK A CRYPTOCURRENCY TO BUY.</h1>
        <h1>SELECT A CRYPTOCURRENCY</h1>
        <table id="cc-table">
          <th>
            STOCK
          </th>
          <th>
            PRICE
          </th>
          <th>
            # COINS OWNED
          </th>
          <!-- Bitcoin Table Info -->
          <tr>
            <td id="bitcoin-table-name">
              BITCOIN (BTC)
            </td>
            <td id="bitcoin-table-price">
            </td>
            <td>
              0
            </td>
          </tr>
          <!-- DOGE Table Info -->
          <tr>
            <td id="dogecoin-table-name">
              DOGECOIN (DOGE)
            </td>
            <td id="doge-table-price">
            </td>
            <td>
              0
            </td>
          </tr>
          <!-- Litecoin Table Info -->
          <tr>
            <td id="litecoin-table-name">
              LITECOIN (LTC)
            </td>
            <td id="litecoin-table-price">
            </td>
            <td>
              0
            </td>
          </tr>
        </table>
    </div>



    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!-- Plotly.js -->
    <script src="https://d14fo0winaifog.cloudfront.net/plotly-basic.js"></script>
    <!-- import Pusher-js library -->
    <script src="https://js.pusher.com/4.1/pusher.min.js"></script>
    <script type="text/javascript">
      // connect to Pusher
      const pusher = new Pusher('d0fbb6934c4ec3d8a001', {
        cluster: 'us2', // gotten from Pusher app dashboard
        encrypted: true // optional
      });
      // subscribe to crypto channel
      const channel = pusher.subscribe('crypto')
      // listen for relevant events

      channel.bind('data-updated', data => {
          document.getElementById('bitcoin-table-price').innerHTML =  "$" + data.btc_price;
          document.getElementById('m_left').innerHTML = "Budget: " + "$" + data.money_left;
          document.getElementById('litecoin-table-price').innerHTML = "$" + data.ltc_price;
          document.getElementById('doge-table-price').innerHTML = "$" + data.doge_price;



      });
      channel.bind('month-updated', data => {
          const btc_month = JSON.parse(data.btc_month_bar);
          Plotly.newPlot('monthly_btc_bar', btc_month);

      });

      channel.bind('ltc-month-updated', data => {
          const ltc_month = JSON.parse(data.ltc_month_bar);
          Plotly.newPlot('monthly_ltc_bar', ltc_month);

      });

      channel.bind('eth-month-updated', data => {
          const eth_month = JSON.parse(data.eth_month_bar);
          Plotly.newPlot('monthly_eth_bar', eth_month);

      });



  //     $(document).ready(function() {
  //       $('#submit').click(function(event) {
  //         event.preventDefault()
  //          //var formdata = $("#bought").serialize();
  //          //var value = $("#bought").val();
  //          //console.log(value);
  //          $.ajax({
  //               type: 'POST',
  //               contentType: 'application/json',
  //               data: "",
  //               dataType: 'json',
  //               url: 'http://127.0.0.1:5000/',
  //               success: function (e) {
  //                   //document.getElementById('m_left').innerHTML = {{moneyLeft}} - {{bitcoinprice}};
  //                   window.location.replace("http://127.0.0.1:5000/form")
  //               },
  //               error: function(error) {
  //                 console.log(error);
  //           }
  //           });
  //       });
  // });


    </script>
</body>
</html>
